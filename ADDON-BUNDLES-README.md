# Addon Bundles for K0rdent Airgap

**Bundle Version**: 2025.07.0  
**Created**: 2025-07-23

## CalVer Versioning

These bundles use Calendar Versioning (CalVer) in the format: **YYYY.MM.PATCH**
- **YYYY**: Full year (e.g., 2025)
- **MM**: Zero-padded month (e.g., 01 for January)
- **PATCH**: Patch number for multiple releases in the same month (starts at 0)

Example: `2025.01.0` = First release in January 2025

## Bundle Files

Each bundle type creates two files:
1. **Versioned bundle**: `<type>-addon-bundle-2025.07.0.tar.gz`
2. **Latest symlink**: `<type>-addon-bundle-latest.tar.gz` → points to versioned file

## Version Metadata

Each bundle contains a `VERSION` file with:
- Bundle version and type
- Creation timestamp
- Component versions included

## Latest Component Versions (2025.07.0)

### Velero
- **Core**: v1.16.1
- **Helm Chart**: v10.0.10
- **AWS/GCP/Azure Plugins**: v1.12.1
- **CSI Plugin**: v0.7.1
- **Restore Helper**: v1.15.2

### OpenEBS
- **Chart**: v3.10.0
- **Images**: v3.5.0 (provisioner, utils), v2.1.0 (disk manager)

### Local Path Provisioner
- **Version**: v0.0.28
- **Helper**: busybox:stable

## Bundle Structure

```
addon-bundle/
├── VERSION          # Version metadata
├── images/          # Container images as OCI tars
│   └── *.tar
├── charts/          # Helm charts as OCI tars (if applicable)
│   └── *.tar
└── manifests/       # Raw YAML manifests (if no Helm chart)
    └── *.yaml
```

## Usage

### Loading Bundles

```bash
# Extract specific version
tar -xzf velero-addon-bundle-2025.07.0.tar.gz

# Or use latest symlink
tar -xzf velero-addon-bundle-latest.tar.gz

# Check version
cat velero-addon-bundle/VERSION

# Load with K0rdent script
./scripts/main/06-load-images-and-charts.sh
```

### Version Management

```bash
# List all bundle versions
ls -la *-addon-bundle-*.tar.gz | grep -v latest

# Check current latest versions
ls -la *-latest.tar.gz

# Compare versions
for f in *-addon-bundle-*/VERSION; do
    echo "=== $f ==="
    grep "bundle_version" "$f"
done
```

## Creating New Patch Versions

To create a new patch version in the same month:
```bash
# Set patch number (increment from last)
export BUNDLE_VERSION="2025.07.1"
./create-addon-bundles-calver.sh
```

## Benefits of CalVer

1. **Clear Timeline**: Instantly know when a bundle was created
2. **Easy Sorting**: Bundles sort chronologically by filename
3. **Version Tracking**: Track which bundle was used in deployments
4. **Update Cadence**: See how frequently bundles are updated
5. **Compatibility**: Correlate with K0rdent versions by date

## Best Practices

1. **Archive Old Versions**: Keep previous versions for rollback
2. **Document Changes**: Note what changed between versions
3. **Test Before Production**: Verify new bundles in test environment
4. **Update Symlinks**: Ensure -latest symlinks point to newest version
5. **Tag Deployments**: Record which bundle version was deployed where

---
Generated by create-addon-bundles-calver.sh v2025.07.0
